{"level":"ERROR","ts":"2025-04-22T22:43:08.464+0800","caller":"service/ai_service.go:114","msg":"调用Gemini API回答代码问题失败","error":"请求失败: Post \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-pro-exp-03-25:generateContent?key=AIzaSyDYXHl8BGUqsXuyu4kT7XUlJo3C14MMGjc\": net/http: TLS handshake timeout","stacktrace":"repo-prompt-web/internal/app/service.(*AIService).AskQuestionAboutCode\n\tD:/goWorks/src/repo-prompt-web/internal/app/service/ai_service.go:114\nrepo-prompt-web/internal/interfaces/http/handlers.(*FileHandler).HandleAskCodeQuestion\n\tD:/goWorks/src/repo-prompt-web/internal/interfaces/http/handlers/file_handler.go:594\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.LoggerMiddleware.func3\n\tD:/goWorks/src/repo-prompt-web/main.go:48\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.RequestIDMiddleware.func2\n\tD:/goWorks/src/repo-prompt-web/main.go:26\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.CORSMiddleware.func1\n\tD:/goWorks/src/repo-prompt-web/main.go:84\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576\nnet/http.serverHandler.ServeHTTP\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:2102"}
{"level":"ERROR","ts":"2025-04-22T22:43:08.464+0800","caller":"handlers/file_handler.go:600","msg":"处理代码问题失败","request_id":"bc25318a-b860-4d73-b5fc-7fb13351fe14","error":"请求失败: Post \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-pro-exp-03-25:generateContent?key=AIzaSyDYXHl8BGUqsXuyu4kT7XUlJo3C14MMGjc\": net/http: TLS handshake timeout","stacktrace":"repo-prompt-web/internal/interfaces/http/handlers.(*FileHandler).HandleAskCodeQuestion\n\tD:/goWorks/src/repo-prompt-web/internal/interfaces/http/handlers/file_handler.go:600\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.LoggerMiddleware.func3\n\tD:/goWorks/src/repo-prompt-web/main.go:48\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.RequestIDMiddleware.func2\n\tD:/goWorks/src/repo-prompt-web/main.go:26\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.CORSMiddleware.func1\n\tD:/goWorks/src/repo-prompt-web/main.go:84\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576\nnet/http.serverHandler.ServeHTTP\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:2102"}
{"level":"ERROR","ts":"2025-04-22T22:43:08.465+0800","caller":"repo-prompt-web/main.go:62","msg":"完成HTTP请求","request_id":"bc25318a-b860-4d73-b5fc-7fb13351fe14","status":500,"latency":29.8840053,"bytes":208,"errors":"","stacktrace":"main.main.LoggerMiddleware.func3\n\tD:/goWorks/src/repo-prompt-web/main.go:62\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.RequestIDMiddleware.func2\n\tD:/goWorks/src/repo-prompt-web/main.go:26\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.CORSMiddleware.func1\n\tD:/goWorks/src/repo-prompt-web/main.go:84\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576\nnet/http.serverHandler.ServeHTTP\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:2102"}
{"level":"ERROR","ts":"2025-04-22T22:49:03.593+0800","caller":"service/ai_service.go:114","msg":"调用Gemini API回答代码问题失败","error":"Gemini API 请求失败，已达到最大重试次数","stacktrace":"repo-prompt-web/internal/app/service.(*AIService).AskQuestionAboutCode\n\tD:/goWorks/src/repo-prompt-web/internal/app/service/ai_service.go:114\nrepo-prompt-web/internal/interfaces/http/handlers.(*FileHandler).HandleAskCodeQuestion\n\tD:/goWorks/src/repo-prompt-web/internal/interfaces/http/handlers/file_handler.go:594\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.LoggerMiddleware.func3\n\tD:/goWorks/src/repo-prompt-web/main.go:48\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.RequestIDMiddleware.func2\n\tD:/goWorks/src/repo-prompt-web/main.go:26\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.CORSMiddleware.func1\n\tD:/goWorks/src/repo-prompt-web/main.go:84\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576\nnet/http.serverHandler.ServeHTTP\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:2102"}
{"level":"ERROR","ts":"2025-04-22T22:49:03.593+0800","caller":"handlers/file_handler.go:600","msg":"处理代码问题失败","request_id":"a729f1a1-8928-4a5f-af23-d7c8862e3533","error":"Gemini API 请求失败，已达到最大重试次数","stacktrace":"repo-prompt-web/internal/interfaces/http/handlers.(*FileHandler).HandleAskCodeQuestion\n\tD:/goWorks/src/repo-prompt-web/internal/interfaces/http/handlers/file_handler.go:600\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.LoggerMiddleware.func3\n\tD:/goWorks/src/repo-prompt-web/main.go:48\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.RequestIDMiddleware.func2\n\tD:/goWorks/src/repo-prompt-web/main.go:26\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.CORSMiddleware.func1\n\tD:/goWorks/src/repo-prompt-web/main.go:84\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576\nnet/http.serverHandler.ServeHTTP\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:2102"}
{"level":"ERROR","ts":"2025-04-22T22:49:03.594+0800","caller":"repo-prompt-web/main.go:62","msg":"完成HTTP请求","request_id":"a729f1a1-8928-4a5f-af23-d7c8862e3533","status":500,"latency":96.0062559,"bytes":65,"errors":"","stacktrace":"main.main.LoggerMiddleware.func3\n\tD:/goWorks/src/repo-prompt-web/main.go:62\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.RequestIDMiddleware.func2\n\tD:/goWorks/src/repo-prompt-web/main.go:26\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.CORSMiddleware.func1\n\tD:/goWorks/src/repo-prompt-web/main.go:84\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576\nnet/http.serverHandler.ServeHTTP\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:2102"}
