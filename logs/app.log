{"level":"INFO","ts":"2025-04-19T19:54:41.204+0800","caller":"repo-prompt-web/main.go:82","msg":"服务启动","config_path":"config.yml"}
{"level":"INFO","ts":"2025-04-19T19:54:41.213+0800","caller":"repo-prompt-web/main.go:125","msg":"已配置 DeepSeek API 密钥，提示词生成功能可用"}
{"level":"INFO","ts":"2025-04-19T19:54:41.213+0800","caller":"repo-prompt-web/main.go:129","msg":"启动服务","listen_addr":":8080"}
{"level":"INFO","ts":"2025-04-19T19:54:41.213+0800","caller":"repo-prompt-web/main.go:130","msg":"API使用方法","combine_code":"POST http://localhost:8080/api/combine-code","github_code":"GET http://localhost:8080/api/github-code?url=<repo_url>","generate_prompt":"POST http://localhost:8080/api/generate-prompt","preprocess_zip":"POST http://localhost:8080/api/preprocess-zip"}
{"level":"INFO","ts":"2025-04-19T19:54:46.417+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"ce01a180-1ead-49ec-8a15-d81b53351a09","client_ip":"::1","method":"POST","path":"/api/combine-code","query":"","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-19T19:54:46.417+0800","caller":"handlers/file_handler.go:40","msg":"处理合并代码请求","request_id":"ce01a180-1ead-49ec-8a15-d81b53351a09","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-19T19:54:47.651+0800","caller":"handlers/file_handler.go:63","msg":"接收到文件上传","request_id":"ce01a180-1ead-49ec-8a15-d81b53351a09","file_name":"metamirror-goods.zip","file_size":348304520}
{"level":"DEBUG","ts":"2025-04-19T19:54:47.651+0800","caller":"handlers/file_handler.go:95","msg":"请求参数","request_id":"ce01a180-1ead-49ec-8a15-d81b53351a09","format":"json","use_base64":false,"generate_prompt":true,"prompt_only":false,"include_content":false}
{"level":"INFO","ts":"2025-04-19T19:54:47.680+0800","caller":"handlers/file_handler.go:114","msg":"ZIP文件处理成功","request_id":"ce01a180-1ead-49ec-8a15-d81b53351a09","file_name":"metamirror-goods.zip","files_count":689}
{"level":"INFO","ts":"2025-04-19T19:54:47.680+0800","caller":"handlers/file_handler.go:123","msg":"开始生成项目架构分析","request_id":"ce01a180-1ead-49ec-8a15-d81b53351a09"}
{"level":"INFO","ts":"2025-04-19T19:55:22.058+0800","caller":"handlers/file_handler.go:161","msg":"项目架构分析生成成功","request_id":"ce01a180-1ead-49ec-8a15-d81b53351a09","generated_at":"2025-04-19T19:55:22.058+0800"}
{"level":"INFO","ts":"2025-04-19T19:55:22.058+0800","caller":"handlers/file_handler.go:172","msg":"返回响应","request_id":"ce01a180-1ead-49ec-8a15-d81b53351a09","format":"json","prompt_only":false,"generate_prompt":true,"has_prompt":true}
{"level":"INFO","ts":"2025-04-19T19:55:22.244+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"ce01a180-1ead-49ec-8a15-d81b53351a09","status":200,"latency":35.827891,"bytes":2146665,"errors":""}
{"level":"INFO","ts":"2025-04-19T19:56:18.828+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"d51ccaa6-d7a6-4952-b1be-9f8498202932","client_ip":"::1","method":"POST","path":"/api/combine-code","query":"","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-19T19:56:18.828+0800","caller":"handlers/file_handler.go:40","msg":"处理合并代码请求","request_id":"d51ccaa6-d7a6-4952-b1be-9f8498202932","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-19T19:56:20.521+0800","caller":"handlers/file_handler.go:63","msg":"接收到文件上传","request_id":"d51ccaa6-d7a6-4952-b1be-9f8498202932","file_name":"metamirror-goods.zip","file_size":348304520}
{"level":"DEBUG","ts":"2025-04-19T19:56:20.521+0800","caller":"handlers/file_handler.go:95","msg":"请求参数","request_id":"d51ccaa6-d7a6-4952-b1be-9f8498202932","format":"txt","use_base64":false,"generate_prompt":true,"prompt_only":false,"include_content":false}
{"level":"INFO","ts":"2025-04-19T19:56:20.583+0800","caller":"handlers/file_handler.go:114","msg":"ZIP文件处理成功","request_id":"d51ccaa6-d7a6-4952-b1be-9f8498202932","file_name":"metamirror-goods.zip","files_count":689}
{"level":"INFO","ts":"2025-04-19T19:56:20.583+0800","caller":"handlers/file_handler.go:123","msg":"开始生成项目架构分析","request_id":"d51ccaa6-d7a6-4952-b1be-9f8498202932"}
{"level":"INFO","ts":"2025-04-19T19:56:51.894+0800","caller":"handlers/file_handler.go:161","msg":"项目架构分析生成成功","request_id":"d51ccaa6-d7a6-4952-b1be-9f8498202932","generated_at":"2025-04-19T19:56:51.894+0800"}
{"level":"INFO","ts":"2025-04-19T19:56:51.894+0800","caller":"handlers/file_handler.go:172","msg":"返回响应","request_id":"d51ccaa6-d7a6-4952-b1be-9f8498202932","format":"txt","prompt_only":false,"generate_prompt":true,"has_prompt":true}
{"level":"INFO","ts":"2025-04-19T19:56:52.171+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"d51ccaa6-d7a6-4952-b1be-9f8498202932","status":200,"latency":33.3435166,"bytes":2179,"errors":""}
{"level":"INFO","ts":"2025-04-19T19:58:32.339+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"1c99e47a-a4a7-4d8f-9d8e-14f1b869eb65","client_ip":"::1","method":"POST","path":"/api/combine-code","query":"","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-19T19:58:32.340+0800","caller":"handlers/file_handler.go:40","msg":"处理合并代码请求","request_id":"1c99e47a-a4a7-4d8f-9d8e-14f1b869eb65","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-19T19:58:33.546+0800","caller":"handlers/file_handler.go:63","msg":"接收到文件上传","request_id":"1c99e47a-a4a7-4d8f-9d8e-14f1b869eb65","file_name":"metamirror-goods.zip","file_size":348304520}
{"level":"DEBUG","ts":"2025-04-19T19:58:33.546+0800","caller":"handlers/file_handler.go:95","msg":"请求参数","request_id":"1c99e47a-a4a7-4d8f-9d8e-14f1b869eb65","format":"txt","use_base64":false,"generate_prompt":true,"prompt_only":false,"include_content":true}
{"level":"INFO","ts":"2025-04-19T19:58:33.605+0800","caller":"handlers/file_handler.go:114","msg":"ZIP文件处理成功","request_id":"1c99e47a-a4a7-4d8f-9d8e-14f1b869eb65","file_name":"metamirror-goods.zip","files_count":689}
{"level":"INFO","ts":"2025-04-19T19:58:33.605+0800","caller":"handlers/file_handler.go:123","msg":"开始生成项目架构分析","request_id":"1c99e47a-a4a7-4d8f-9d8e-14f1b869eb65"}
{"level":"INFO","ts":"2025-04-19T19:59:12.308+0800","caller":"handlers/file_handler.go:161","msg":"项目架构分析生成成功","request_id":"1c99e47a-a4a7-4d8f-9d8e-14f1b869eb65","generated_at":"2025-04-19T19:59:12.308+0800"}
{"level":"INFO","ts":"2025-04-19T19:59:12.308+0800","caller":"handlers/file_handler.go:172","msg":"返回响应","request_id":"1c99e47a-a4a7-4d8f-9d8e-14f1b869eb65","format":"txt","prompt_only":false,"generate_prompt":true,"has_prompt":true}
{"level":"INFO","ts":"2025-04-19T19:59:12.638+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"1c99e47a-a4a7-4d8f-9d8e-14f1b869eb65","status":200,"latency":40.2988251,"bytes":1835148,"errors":""}
{"level":"INFO","ts":"2025-04-19T20:36:13.128+0800","caller":"repo-prompt-web/main.go:82","msg":"服务启动","config_path":"config.yml"}
{"level":"INFO","ts":"2025-04-19T20:36:13.138+0800","caller":"repo-prompt-web/main.go:125","msg":"已配置 DeepSeek API 密钥，提示词生成功能可用"}
{"level":"INFO","ts":"2025-04-19T20:36:13.138+0800","caller":"repo-prompt-web/main.go:129","msg":"启动服务","listen_addr":":8080"}
{"level":"INFO","ts":"2025-04-19T20:36:13.138+0800","caller":"repo-prompt-web/main.go:130","msg":"API使用方法","combine_code":"POST http://localhost:8080/api/combine-code","github_code":"GET http://localhost:8080/api/github-code?url=<repo_url>","generate_prompt":"POST http://localhost:8080/api/generate-prompt","preprocess_zip":"POST http://localhost:8080/api/preprocess-zip"}
{"level":"INFO","ts":"2025-04-19T20:56:50.049+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"8271ab46-2b04-4948-8e74-177b44c06d25","client_ip":"127.0.0.1","method":"GET","path":"/health","query":"","user_agent":"node"}
{"level":"WARN","ts":"2025-04-19T20:56:50.050+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"8271ab46-2b04-4948-8e74-177b44c06d25","status":404,"latency":0.0012228,"bytes":-1,"errors":""}
{"level":"INFO","ts":"2025-04-19T20:58:02.682+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"0dddf512-ec97-4679-ac0c-06ba51c7dc84","client_ip":"127.0.0.1","method":"POST","path":"/api/preprocess-zip","query":"format=text&base64=false&generate_prompt=true&prompt_only=true&include_content=true","user_agent":"node"}
{"level":"INFO","ts":"2025-04-19T20:58:39.387+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"0dddf512-ec97-4679-ac0c-06ba51c7dc84","status":200,"latency":36.7054049,"bytes":384696,"errors":""}
{"level":"INFO","ts":"2025-04-19T21:02:14.847+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"a6876659-1745-4b74-90b5-8c465ee7944c","client_ip":"127.0.0.1","method":"POST","path":"/api/preprocess-zip","query":"format=text&base64=false&generate_prompt=true&prompt_only=true&include_content=true","user_agent":"node"}
{"level":"INFO","ts":"2025-04-19T21:02:47.732+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"a6876659-1745-4b74-90b5-8c465ee7944c","status":200,"latency":32.8854328,"bytes":384600,"errors":""}
{"level":"INFO","ts":"2025-04-19T21:04:58.789+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"c171ac69-8b69-4917-a54b-6f739c194721","client_ip":"127.0.0.1","method":"POST","path":"/api/preprocess-zip","query":"format=json&base64=false&generate_prompt=true&prompt_only=true&include_content=true","user_agent":"node"}
{"level":"INFO","ts":"2025-04-19T21:05:37.399+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"c171ac69-8b69-4917-a54b-6f739c194721","status":200,"latency":38.6096614,"bytes":408767,"errors":""}
{"level":"INFO","ts":"2025-04-19T21:06:08.273+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"e7c3895e-547b-400f-bc8d-62590184fc0f","client_ip":"127.0.0.1","method":"POST","path":"/api/preprocess-zip","query":"format=json&base64=false&generate_prompt=true&prompt_only=false&include_content=true","user_agent":"node"}
{"level":"INFO","ts":"2025-04-19T21:06:43.971+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"e7c3895e-547b-400f-bc8d-62590184fc0f","status":200,"latency":35.6987113,"bytes":408612,"errors":""}
{"level":"INFO","ts":"2025-04-19T21:07:49.508+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"228fcd27-5d20-4d7c-8d0b-6c9c45eb2753","client_ip":"127.0.0.1","method":"POST","path":"/api/preprocess-zip","query":"format=json&base64=false&generate_prompt=true&prompt_only=false&include_content=true","user_agent":"node"}
{"level":"INFO","ts":"2025-04-19T21:08:22.426+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"228fcd27-5d20-4d7c-8d0b-6c9c45eb2753","status":200,"latency":32.918226,"bytes":408391,"errors":""}
{"level":"INFO","ts":"2025-04-19T21:10:13.558+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"a90aabfe-430a-482f-83ab-4e2e3e44d3d1","client_ip":"127.0.0.1","method":"POST","path":"/api/combine-code","query":"format=json&base64=false&generate_prompt=true&prompt_only=false&include_content=true","user_agent":"node"}
{"level":"INFO","ts":"2025-04-19T21:10:13.563+0800","caller":"handlers/file_handler.go:40","msg":"处理合并代码请求","request_id":"a90aabfe-430a-482f-83ab-4e2e3e44d3d1","client_ip":"127.0.0.1"}
{"level":"DEBUG","ts":"2025-04-19T21:10:13.564+0800","caller":"handlers/file_handler.go:63","msg":"接收到文件上传","request_id":"a90aabfe-430a-482f-83ab-4e2e3e44d3d1","file_name":"tiktok.zip","file_size":449526}
{"level":"DEBUG","ts":"2025-04-19T21:10:13.564+0800","caller":"handlers/file_handler.go:95","msg":"请求参数","request_id":"a90aabfe-430a-482f-83ab-4e2e3e44d3d1","format":"json","use_base64":false,"generate_prompt":true,"prompt_only":false,"include_content":true}
{"level":"INFO","ts":"2025-04-19T21:10:13.572+0800","caller":"handlers/file_handler.go:114","msg":"ZIP文件处理成功","request_id":"a90aabfe-430a-482f-83ab-4e2e3e44d3d1","file_name":"tiktok.zip","files_count":60}
{"level":"INFO","ts":"2025-04-19T21:10:13.572+0800","caller":"handlers/file_handler.go:123","msg":"开始生成项目架构分析","request_id":"a90aabfe-430a-482f-83ab-4e2e3e44d3d1"}
{"level":"INFO","ts":"2025-04-19T21:10:42.305+0800","caller":"handlers/file_handler.go:161","msg":"项目架构分析生成成功","request_id":"a90aabfe-430a-482f-83ab-4e2e3e44d3d1","generated_at":"2025-04-19T21:10:42.305+0800"}
{"level":"INFO","ts":"2025-04-19T21:10:42.305+0800","caller":"handlers/file_handler.go:172","msg":"返回响应","request_id":"a90aabfe-430a-482f-83ab-4e2e3e44d3d1","format":"json","prompt_only":false,"generate_prompt":true,"has_prompt":true}
{"level":"INFO","ts":"2025-04-19T21:10:42.334+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"a90aabfe-430a-482f-83ab-4e2e3e44d3d1","status":200,"latency":28.7768334,"bytes":405708,"errors":""}
{"level":"INFO","ts":"2025-04-19T21:11:49.066+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"d826ab45-1a94-4a67-b6b6-f81cc633fe86","client_ip":"127.0.0.1","method":"GET","path":"/health","query":"","user_agent":"node"}
{"level":"WARN","ts":"2025-04-19T21:11:49.066+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"d826ab45-1a94-4a67-b6b6-f81cc633fe86","status":404,"latency":0,"bytes":-1,"errors":""}
{"level":"INFO","ts":"2025-04-19T21:13:52.866+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"8e383b64-30ca-4421-803a-7a6dba4c0fb9","client_ip":"127.0.0.1","method":"GET","path":"/health","query":"","user_agent":"node"}
{"level":"WARN","ts":"2025-04-19T21:13:52.866+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"8e383b64-30ca-4421-803a-7a6dba4c0fb9","status":404,"latency":0,"bytes":-1,"errors":""}
{"level":"INFO","ts":"2025-04-19T21:14:07.203+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"83e76c98-2e20-4cf6-b0b2-85ef3ed3a92a","client_ip":"127.0.0.1","method":"POST","path":"/api/combine-code","query":"format=text&base64=false&generate_prompt=true&prompt_only=false&include_content=true","user_agent":"node"}
{"level":"INFO","ts":"2025-04-19T21:14:07.203+0800","caller":"handlers/file_handler.go:40","msg":"处理合并代码请求","request_id":"83e76c98-2e20-4cf6-b0b2-85ef3ed3a92a","client_ip":"127.0.0.1"}
{"level":"DEBUG","ts":"2025-04-19T21:14:07.206+0800","caller":"handlers/file_handler.go:63","msg":"接收到文件上传","request_id":"83e76c98-2e20-4cf6-b0b2-85ef3ed3a92a","file_name":"tiktok.zip","file_size":449526}
{"level":"DEBUG","ts":"2025-04-19T21:14:07.206+0800","caller":"handlers/file_handler.go:95","msg":"请求参数","request_id":"83e76c98-2e20-4cf6-b0b2-85ef3ed3a92a","format":"text","use_base64":false,"generate_prompt":true,"prompt_only":false,"include_content":true}
{"level":"INFO","ts":"2025-04-19T21:14:07.216+0800","caller":"handlers/file_handler.go:114","msg":"ZIP文件处理成功","request_id":"83e76c98-2e20-4cf6-b0b2-85ef3ed3a92a","file_name":"tiktok.zip","files_count":60}
{"level":"INFO","ts":"2025-04-19T21:14:07.216+0800","caller":"handlers/file_handler.go:123","msg":"开始生成项目架构分析","request_id":"83e76c98-2e20-4cf6-b0b2-85ef3ed3a92a"}
{"level":"INFO","ts":"2025-04-19T21:14:47.751+0800","caller":"handlers/file_handler.go:161","msg":"项目架构分析生成成功","request_id":"83e76c98-2e20-4cf6-b0b2-85ef3ed3a92a","generated_at":"2025-04-19T21:14:47.751+0800"}
{"level":"INFO","ts":"2025-04-19T21:14:47.751+0800","caller":"handlers/file_handler.go:172","msg":"返回响应","request_id":"83e76c98-2e20-4cf6-b0b2-85ef3ed3a92a","format":"text","prompt_only":false,"generate_prompt":true,"has_prompt":true}
{"level":"INFO","ts":"2025-04-19T21:14:47.794+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"83e76c98-2e20-4cf6-b0b2-85ef3ed3a92a","status":200,"latency":40.5909144,"bytes":383272,"errors":""}
{"level":"INFO","ts":"2025-04-19T21:15:10.861+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"6166bcaa-54df-4a65-bf27-3234d38999bc","client_ip":"127.0.0.1","method":"POST","path":"/api/combine-code","query":"format=json&base64=false&generate_prompt=true&prompt_only=false&include_content=true","user_agent":"node"}
{"level":"INFO","ts":"2025-04-19T21:15:10.861+0800","caller":"handlers/file_handler.go:40","msg":"处理合并代码请求","request_id":"6166bcaa-54df-4a65-bf27-3234d38999bc","client_ip":"127.0.0.1"}
{"level":"DEBUG","ts":"2025-04-19T21:15:10.864+0800","caller":"handlers/file_handler.go:63","msg":"接收到文件上传","request_id":"6166bcaa-54df-4a65-bf27-3234d38999bc","file_name":"tiktok.zip","file_size":449526}
{"level":"DEBUG","ts":"2025-04-19T21:15:10.864+0800","caller":"handlers/file_handler.go:95","msg":"请求参数","request_id":"6166bcaa-54df-4a65-bf27-3234d38999bc","format":"json","use_base64":false,"generate_prompt":true,"prompt_only":false,"include_content":true}
{"level":"INFO","ts":"2025-04-19T21:15:10.872+0800","caller":"handlers/file_handler.go:114","msg":"ZIP文件处理成功","request_id":"6166bcaa-54df-4a65-bf27-3234d38999bc","file_name":"tiktok.zip","files_count":60}
{"level":"INFO","ts":"2025-04-19T21:15:10.873+0800","caller":"handlers/file_handler.go:123","msg":"开始生成项目架构分析","request_id":"6166bcaa-54df-4a65-bf27-3234d38999bc"}
{"level":"INFO","ts":"2025-04-19T21:15:44.435+0800","caller":"handlers/file_handler.go:161","msg":"项目架构分析生成成功","request_id":"6166bcaa-54df-4a65-bf27-3234d38999bc","generated_at":"2025-04-19T21:15:44.435+0800"}
{"level":"INFO","ts":"2025-04-19T21:15:44.435+0800","caller":"handlers/file_handler.go:172","msg":"返回响应","request_id":"6166bcaa-54df-4a65-bf27-3234d38999bc","format":"json","prompt_only":false,"generate_prompt":true,"has_prompt":true}
{"level":"INFO","ts":"2025-04-19T21:15:44.452+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"6166bcaa-54df-4a65-bf27-3234d38999bc","status":200,"latency":33.591376,"bytes":406332,"errors":""}
{"level":"INFO","ts":"2025-04-19T21:16:29.488+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"2c02ee79-1771-44a7-96a3-6cc62cda29f2","client_ip":"127.0.0.1","method":"POST","path":"/api/combine-code","query":"format=json&base64=false&generate_prompt=true&prompt_only=false&include_content=true","user_agent":"node"}
{"level":"INFO","ts":"2025-04-19T21:16:29.488+0800","caller":"handlers/file_handler.go:40","msg":"处理合并代码请求","request_id":"2c02ee79-1771-44a7-96a3-6cc62cda29f2","client_ip":"127.0.0.1"}
{"level":"DEBUG","ts":"2025-04-19T21:16:29.492+0800","caller":"handlers/file_handler.go:63","msg":"接收到文件上传","request_id":"2c02ee79-1771-44a7-96a3-6cc62cda29f2","file_name":"tiktok.zip","file_size":449526}
{"level":"DEBUG","ts":"2025-04-19T21:16:29.492+0800","caller":"handlers/file_handler.go:95","msg":"请求参数","request_id":"2c02ee79-1771-44a7-96a3-6cc62cda29f2","format":"json","use_base64":false,"generate_prompt":true,"prompt_only":false,"include_content":true}
{"level":"INFO","ts":"2025-04-19T21:16:29.512+0800","caller":"handlers/file_handler.go:114","msg":"ZIP文件处理成功","request_id":"2c02ee79-1771-44a7-96a3-6cc62cda29f2","file_name":"tiktok.zip","files_count":60}
{"level":"INFO","ts":"2025-04-19T21:16:29.512+0800","caller":"handlers/file_handler.go:123","msg":"开始生成项目架构分析","request_id":"2c02ee79-1771-44a7-96a3-6cc62cda29f2"}
{"level":"INFO","ts":"2025-04-19T21:17:05.047+0800","caller":"handlers/file_handler.go:161","msg":"项目架构分析生成成功","request_id":"2c02ee79-1771-44a7-96a3-6cc62cda29f2","generated_at":"2025-04-19T21:17:05.047+0800"}
{"level":"INFO","ts":"2025-04-19T21:17:05.047+0800","caller":"handlers/file_handler.go:172","msg":"返回响应","request_id":"2c02ee79-1771-44a7-96a3-6cc62cda29f2","format":"json","prompt_only":false,"generate_prompt":true,"has_prompt":true}
{"level":"INFO","ts":"2025-04-19T21:17:05.066+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"2c02ee79-1771-44a7-96a3-6cc62cda29f2","status":200,"latency":35.5777187,"bytes":406391,"errors":""}
{"level":"INFO","ts":"2025-04-19T21:24:42.583+0800","caller":"repo-prompt-web/main.go:82","msg":"服务启动","config_path":"config.yml"}
{"level":"INFO","ts":"2025-04-19T21:24:42.596+0800","caller":"repo-prompt-web/main.go:125","msg":"已配置 DeepSeek API 密钥，提示词生成功能可用"}
{"level":"INFO","ts":"2025-04-19T21:24:42.596+0800","caller":"repo-prompt-web/main.go:129","msg":"启动服务","listen_addr":":8080"}
{"level":"INFO","ts":"2025-04-19T21:24:42.596+0800","caller":"repo-prompt-web/main.go:130","msg":"API使用方法","combine_code":"POST http://localhost:8080/api/combine-code","github_code":"GET http://localhost:8080/api/github-code?url=<repo_url>","generate_prompt":"POST http://localhost:8080/api/generate-prompt","preprocess_zip":"POST http://localhost:8080/api/preprocess-zip"}
{"level":"INFO","ts":"2025-04-19T21:24:51.655+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"50e3b6ba-35ba-4ff0-9358-a4742608581f","client_ip":"127.0.0.1","method":"POST","path":"/api/combine-code","query":"format=text&base64=false&generate_prompt=true&prompt_only=false&include_content=true","user_agent":"node"}
{"level":"INFO","ts":"2025-04-19T21:24:51.655+0800","caller":"handlers/file_handler.go:40","msg":"处理合并代码请求","request_id":"50e3b6ba-35ba-4ff0-9358-a4742608581f","client_ip":"127.0.0.1"}
{"level":"DEBUG","ts":"2025-04-19T21:24:51.660+0800","caller":"handlers/file_handler.go:63","msg":"接收到文件上传","request_id":"50e3b6ba-35ba-4ff0-9358-a4742608581f","file_name":"tiktok.zip","file_size":449526}
{"level":"DEBUG","ts":"2025-04-19T21:24:51.661+0800","caller":"handlers/file_handler.go:95","msg":"请求参数","request_id":"50e3b6ba-35ba-4ff0-9358-a4742608581f","format":"text","use_base64":false,"generate_prompt":true,"prompt_only":false,"include_content":true}
{"level":"INFO","ts":"2025-04-19T21:24:51.671+0800","caller":"handlers/file_handler.go:114","msg":"ZIP文件处理成功","request_id":"50e3b6ba-35ba-4ff0-9358-a4742608581f","file_name":"tiktok.zip","files_count":60}
{"level":"INFO","ts":"2025-04-19T21:24:51.671+0800","caller":"handlers/file_handler.go:123","msg":"开始生成项目架构分析","request_id":"50e3b6ba-35ba-4ff0-9358-a4742608581f"}
{"level":"INFO","ts":"2025-04-19T21:25:30.240+0800","caller":"handlers/file_handler.go:161","msg":"项目架构分析生成成功","request_id":"50e3b6ba-35ba-4ff0-9358-a4742608581f","generated_at":"2025-04-19T21:25:30.240+0800"}
{"level":"INFO","ts":"2025-04-19T21:25:30.240+0800","caller":"handlers/file_handler.go:172","msg":"返回响应","request_id":"50e3b6ba-35ba-4ff0-9358-a4742608581f","format":"text","prompt_only":false,"generate_prompt":true,"has_prompt":true}
{"level":"INFO","ts":"2025-04-19T21:25:30.282+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"50e3b6ba-35ba-4ff0-9358-a4742608581f","status":200,"latency":38.6270612,"bytes":383025,"errors":""}
{"level":"INFO","ts":"2025-04-19T21:26:33.848+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"795a532f-543a-4bf6-9fc5-56c25dffa65f","client_ip":"127.0.0.1","method":"GET","path":"/api/github-code","query":"url=https%3A%2F%2Fgithub.com%2Fchengazhen%2Fcursor-auto-free.git&format=text&base64=false&generate_prompt=true&prompt_only=false&include_content=true","user_agent":"node"}
{"level":"INFO","ts":"2025-04-19T21:27:54.944+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"795a532f-543a-4bf6-9fc5-56c25dffa65f","status":200,"latency":81.0961441,"bytes":109557,"errors":""}
{"level":"INFO","ts":"2025-04-19T21:30:26.184+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"d26ceeb7-dcb5-4c7e-a5ab-5f69e6350303","client_ip":"127.0.0.1","method":"GET","path":"/health","query":"","user_agent":"node"}
{"level":"WARN","ts":"2025-04-19T21:30:26.185+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"d26ceeb7-dcb5-4c7e-a5ab-5f69e6350303","status":404,"latency":0.00061,"bytes":-1,"errors":""}
{"level":"INFO","ts":"2025-04-22T20:48:23.940+0800","caller":"repo-prompt-web/main.go:82","msg":"服务启动","config_path":"config.yml"}
{"level":"WARN","ts":"2025-04-22T20:48:23.950+0800","caller":"repo-prompt-web/main.go:122","msg":"未设置 DeepSeek API 密钥，提示词生成功能将无法使用"}
{"level":"INFO","ts":"2025-04-22T20:48:23.950+0800","caller":"repo-prompt-web/main.go:123","msg":"请在 config.yml 文件中配置 api_keys.deepseek 或设置环境变量 DEEPSEEK_API_KEY"}
{"level":"INFO","ts":"2025-04-22T20:48:23.950+0800","caller":"repo-prompt-web/main.go:129","msg":"启动服务","listen_addr":":8080"}
{"level":"INFO","ts":"2025-04-22T20:48:23.950+0800","caller":"repo-prompt-web/main.go:130","msg":"API使用方法","combine_code":"POST http://localhost:8080/api/combine-code","github_code":"GET http://localhost:8080/api/github-code?url=<repo_url>","generate_prompt":"POST http://localhost:8080/api/generate-prompt","preprocess_zip":"POST http://localhost:8080/api/preprocess-zip"}
{"level":"INFO","ts":"2025-04-22T22:22:34.431+0800","caller":"repo-prompt-web/main.go:82","msg":"服务启动","config_path":"config.yml"}
{"level":"INFO","ts":"2025-04-22T22:22:34.438+0800","caller":"repo-prompt-web/main.go:125","msg":"已配置 DeepSeek API 密钥，提示词生成功能可用"}
{"level":"INFO","ts":"2025-04-22T22:22:34.438+0800","caller":"repo-prompt-web/main.go:129","msg":"启动服务","listen_addr":":8080"}
{"level":"INFO","ts":"2025-04-22T22:22:34.438+0800","caller":"repo-prompt-web/main.go:130","msg":"API使用方法","combine_code":"POST http://localhost:8080/api/combine-code","github_code":"GET http://localhost:8080/api/github-code?url=<repo_url>","generate_prompt":"POST http://localhost:8080/api/generate-prompt","preprocess_zip":"POST http://localhost:8080/api/preprocess-zip"}
{"level":"INFO","ts":"2025-04-22T22:28:30.583+0800","caller":"repo-prompt-web/main.go:38","msg":"收到HTTP请求","request_id":"307a313f-d6bc-4ed9-b40d-1ca11a8cf6a4","client_ip":"::1","method":"POST","path":"/api/combine-code","query":"","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-22T22:28:30.583+0800","caller":"handlers/file_handler.go:40","msg":"处理合并代码请求","request_id":"307a313f-d6bc-4ed9-b40d-1ca11a8cf6a4","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-22T22:28:30.589+0800","caller":"handlers/file_handler.go:63","msg":"接收到文件上传","request_id":"307a313f-d6bc-4ed9-b40d-1ca11a8cf6a4","file_name":"repo-prompt-web.zip","file_size":29826}
{"level":"DEBUG","ts":"2025-04-22T22:28:30.589+0800","caller":"handlers/file_handler.go:95","msg":"请求参数","request_id":"307a313f-d6bc-4ed9-b40d-1ca11a8cf6a4","format":"text","use_base64":false,"generate_prompt":true,"prompt_only":false,"include_content":true}
{"level":"INFO","ts":"2025-04-22T22:28:30.589+0800","caller":"handlers/file_handler.go:114","msg":"ZIP文件处理成功","request_id":"307a313f-d6bc-4ed9-b40d-1ca11a8cf6a4","file_name":"repo-prompt-web.zip","files_count":10}
{"level":"INFO","ts":"2025-04-22T22:28:30.589+0800","caller":"handlers/file_handler.go:122","msg":"开始生成项目架构分析","request_id":"307a313f-d6bc-4ed9-b40d-1ca11a8cf6a4"}
{"level":"INFO","ts":"2025-04-22T22:28:58.779+0800","caller":"handlers/file_handler.go:162","msg":"项目架构分析生成成功","request_id":"307a313f-d6bc-4ed9-b40d-1ca11a8cf6a4"}
{"level":"INFO","ts":"2025-04-22T22:28:58.779+0800","caller":"handlers/file_handler.go:168","msg":"返回响应","request_id":"307a313f-d6bc-4ed9-b40d-1ca11a8cf6a4","format":"text","prompt_only":false,"generate_prompt":true,"has_prompt":true}
{"level":"INFO","ts":"2025-04-22T22:28:58.788+0800","caller":"repo-prompt-web/main.go:61","msg":"完成HTTP请求","request_id":"307a313f-d6bc-4ed9-b40d-1ca11a8cf6a4","status":200,"latency":28.2057662,"bytes":20469,"errors":""}
{"level":"INFO","ts":"2025-04-22T22:40:05.717+0800","caller":"repo-prompt-web/main.go:100","msg":"服务启动","config_path":"config.yml"}
{"level":"INFO","ts":"2025-04-22T22:40:05.725+0800","caller":"repo-prompt-web/main.go:149","msg":"已配置 DeepSeek API 密钥，提示词生成功能可用"}
{"level":"INFO","ts":"2025-04-22T22:40:05.725+0800","caller":"repo-prompt-web/main.go:157","msg":"已配置 Gemini API 密钥，代码问答功能可用"}
{"level":"INFO","ts":"2025-04-22T22:40:05.725+0800","caller":"repo-prompt-web/main.go:161","msg":"启动服务","listen_addr":":8080"}
{"level":"INFO","ts":"2025-04-22T22:40:05.726+0800","caller":"repo-prompt-web/main.go:162","msg":"API使用方法","combine_code":"POST http://localhost:8080/api/combine-code","github_code":"GET http://localhost:8080/api/github-code?url=<repo_url>","generate_prompt":"POST http://localhost:8080/api/generate-prompt","preprocess_zip":"POST http://localhost:8080/api/preprocess-zip","ask_code_question":"GET/POST http://localhost:8080/api/ask-code-question?session_id=<id>&question=<question>&stream=true|false"}
{"level":"INFO","ts":"2025-04-22T22:40:15.457+0800","caller":"repo-prompt-web/main.go:39","msg":"收到HTTP请求","request_id":"1985724e-dc9e-4bd2-8d15-ef628ad4eac6","client_ip":"::1","method":"POST","path":"/api/combine-code","query":"","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-22T22:40:15.457+0800","caller":"handlers/file_handler.go:133","msg":"处理合并代码请求","request_id":"1985724e-dc9e-4bd2-8d15-ef628ad4eac6","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-22T22:40:15.458+0800","caller":"handlers/file_handler.go:156","msg":"接收到文件上传","request_id":"1985724e-dc9e-4bd2-8d15-ef628ad4eac6","file_name":"repo-prompt-web.zip","file_size":29826}
{"level":"DEBUG","ts":"2025-04-22T22:40:15.458+0800","caller":"handlers/file_handler.go:188","msg":"请求参数","request_id":"1985724e-dc9e-4bd2-8d15-ef628ad4eac6","format":"text","use_base64":false,"generate_prompt":true,"prompt_only":false,"include_content":true}
{"level":"INFO","ts":"2025-04-22T22:40:15.458+0800","caller":"handlers/file_handler.go:207","msg":"ZIP文件处理成功","request_id":"1985724e-dc9e-4bd2-8d15-ef628ad4eac6","file_name":"repo-prompt-web.zip","files_count":10}
{"level":"INFO","ts":"2025-04-22T22:40:15.458+0800","caller":"handlers/file_handler.go:215","msg":"开始生成项目架构分析","request_id":"1985724e-dc9e-4bd2-8d15-ef628ad4eac6"}
{"level":"INFO","ts":"2025-04-22T22:40:45.683+0800","caller":"handlers/file_handler.go:255","msg":"项目架构分析生成成功","request_id":"1985724e-dc9e-4bd2-8d15-ef628ad4eac6"}
{"level":"INFO","ts":"2025-04-22T22:40:45.683+0800","caller":"handlers/file_handler.go:261","msg":"返回响应","request_id":"1985724e-dc9e-4bd2-8d15-ef628ad4eac6","format":"text","prompt_only":false,"generate_prompt":true,"has_prompt":true}
{"level":"DEBUG","ts":"2025-04-22T22:40:45.683+0800","caller":"handlers/file_handler.go:270","msg":"已创建会话","request_id":"1985724e-dc9e-4bd2-8d15-ef628ad4eac6","session_id":"450c310e-f9e4-486a-9136-c51184559b7e"}
{"level":"INFO","ts":"2025-04-22T22:40:45.687+0800","caller":"repo-prompt-web/main.go:62","msg":"完成HTTP请求","request_id":"1985724e-dc9e-4bd2-8d15-ef628ad4eac6","status":200,"latency":30.2298825,"bytes":20808,"errors":""}
{"level":"INFO","ts":"2025-04-22T22:42:38.581+0800","caller":"repo-prompt-web/main.go:39","msg":"收到HTTP请求","request_id":"bc25318a-b860-4d73-b5fc-7fb13351fe14","client_ip":"::1","method":"GET","path":"/api/ask-code-question","query":"session_id=450c310e-f9e4-486a-9136-c51184559b7e&question=%E4%B8%BB%E8%A6%81%E5%AE%9E%E7%8E%B0%E4%BA%86%E4%BB%80%E4%B9%88%E5%8A%9F%E8%83%BD","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-22T22:42:38.581+0800","caller":"handlers/file_handler.go:504","msg":"处理代码问题请求","request_id":"bc25318a-b860-4d73-b5fc-7fb13351fe14","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-22T22:42:38.581+0800","caller":"handlers/file_handler.go:539","msg":"问题参数","request_id":"bc25318a-b860-4d73-b5fc-7fb13351fe14","question":"主要实现了什么功能","session_id":"450c310e-f9e4-486a-9136-c51184559b7e","stream":false}
{"level":"DEBUG","ts":"2025-04-22T22:42:38.581+0800","caller":"gemini/client.go:82","msg":"准备发送提示词到 Gemini API","model":"gemini-2.5-pro-exp-03-25","prompt_length":18216}
{"level":"ERROR","ts":"2025-04-22T22:43:08.464+0800","caller":"service/ai_service.go:114","msg":"调用Gemini API回答代码问题失败","error":"请求失败: Post \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-pro-exp-03-25:generateContent?key=AIzaSyDYXHl8BGUqsXuyu4kT7XUlJo3C14MMGjc\": net/http: TLS handshake timeout","stacktrace":"repo-prompt-web/internal/app/service.(*AIService).AskQuestionAboutCode\n\tD:/goWorks/src/repo-prompt-web/internal/app/service/ai_service.go:114\nrepo-prompt-web/internal/interfaces/http/handlers.(*FileHandler).HandleAskCodeQuestion\n\tD:/goWorks/src/repo-prompt-web/internal/interfaces/http/handlers/file_handler.go:594\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.LoggerMiddleware.func3\n\tD:/goWorks/src/repo-prompt-web/main.go:48\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.RequestIDMiddleware.func2\n\tD:/goWorks/src/repo-prompt-web/main.go:26\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.CORSMiddleware.func1\n\tD:/goWorks/src/repo-prompt-web/main.go:84\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576\nnet/http.serverHandler.ServeHTTP\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:2102"}
{"level":"ERROR","ts":"2025-04-22T22:43:08.464+0800","caller":"handlers/file_handler.go:600","msg":"处理代码问题失败","request_id":"bc25318a-b860-4d73-b5fc-7fb13351fe14","error":"请求失败: Post \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-pro-exp-03-25:generateContent?key=AIzaSyDYXHl8BGUqsXuyu4kT7XUlJo3C14MMGjc\": net/http: TLS handshake timeout","stacktrace":"repo-prompt-web/internal/interfaces/http/handlers.(*FileHandler).HandleAskCodeQuestion\n\tD:/goWorks/src/repo-prompt-web/internal/interfaces/http/handlers/file_handler.go:600\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.LoggerMiddleware.func3\n\tD:/goWorks/src/repo-prompt-web/main.go:48\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.RequestIDMiddleware.func2\n\tD:/goWorks/src/repo-prompt-web/main.go:26\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.CORSMiddleware.func1\n\tD:/goWorks/src/repo-prompt-web/main.go:84\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576\nnet/http.serverHandler.ServeHTTP\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:2102"}
{"level":"ERROR","ts":"2025-04-22T22:43:08.465+0800","caller":"repo-prompt-web/main.go:62","msg":"完成HTTP请求","request_id":"bc25318a-b860-4d73-b5fc-7fb13351fe14","status":500,"latency":29.8840053,"bytes":208,"errors":"","stacktrace":"main.main.LoggerMiddleware.func3\n\tD:/goWorks/src/repo-prompt-web/main.go:62\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.RequestIDMiddleware.func2\n\tD:/goWorks/src/repo-prompt-web/main.go:26\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.CORSMiddleware.func1\n\tD:/goWorks/src/repo-prompt-web/main.go:84\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576\nnet/http.serverHandler.ServeHTTP\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:2102"}
{"level":"INFO","ts":"2025-04-22T22:46:26.281+0800","caller":"repo-prompt-web/main.go:100","msg":"服务启动","config_path":"config.yml"}
{"level":"INFO","ts":"2025-04-22T22:46:26.294+0800","caller":"repo-prompt-web/main.go:149","msg":"已配置 DeepSeek API 密钥，提示词生成功能可用"}
{"level":"INFO","ts":"2025-04-22T22:46:26.294+0800","caller":"repo-prompt-web/main.go:157","msg":"已配置 Gemini API 密钥，代码问答功能可用"}
{"level":"INFO","ts":"2025-04-22T22:46:26.294+0800","caller":"repo-prompt-web/main.go:161","msg":"启动服务","listen_addr":":8080"}
{"level":"INFO","ts":"2025-04-22T22:46:26.294+0800","caller":"repo-prompt-web/main.go:162","msg":"API使用方法","combine_code":"POST http://localhost:8080/api/combine-code","github_code":"GET http://localhost:8080/api/github-code?url=<repo_url>","generate_prompt":"POST http://localhost:8080/api/generate-prompt","preprocess_zip":"POST http://localhost:8080/api/preprocess-zip","ask_code_question":"GET/POST http://localhost:8080/api/ask-code-question?session_id=<id>&question=<question>&stream=true|false"}
{"level":"INFO","ts":"2025-04-22T22:46:33.879+0800","caller":"repo-prompt-web/main.go:39","msg":"收到HTTP请求","request_id":"7197e47b-464e-49f2-94b1-6df21411fc81","client_ip":"::1","method":"POST","path":"/api/combine-code","query":"","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-22T22:46:33.879+0800","caller":"handlers/file_handler.go:133","msg":"处理合并代码请求","request_id":"7197e47b-464e-49f2-94b1-6df21411fc81","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-22T22:46:33.879+0800","caller":"handlers/file_handler.go:156","msg":"接收到文件上传","request_id":"7197e47b-464e-49f2-94b1-6df21411fc81","file_name":"repo-prompt-web.zip","file_size":29826}
{"level":"DEBUG","ts":"2025-04-22T22:46:33.879+0800","caller":"handlers/file_handler.go:188","msg":"请求参数","request_id":"7197e47b-464e-49f2-94b1-6df21411fc81","format":"text","use_base64":false,"generate_prompt":true,"prompt_only":false,"include_content":true}
{"level":"INFO","ts":"2025-04-22T22:46:33.880+0800","caller":"handlers/file_handler.go:207","msg":"ZIP文件处理成功","request_id":"7197e47b-464e-49f2-94b1-6df21411fc81","file_name":"repo-prompt-web.zip","files_count":10}
{"level":"INFO","ts":"2025-04-22T22:46:33.880+0800","caller":"handlers/file_handler.go:215","msg":"开始生成项目架构分析","request_id":"7197e47b-464e-49f2-94b1-6df21411fc81"}
{"level":"INFO","ts":"2025-04-22T22:47:11.382+0800","caller":"handlers/file_handler.go:255","msg":"项目架构分析生成成功","request_id":"7197e47b-464e-49f2-94b1-6df21411fc81"}
{"level":"INFO","ts":"2025-04-22T22:47:11.382+0800","caller":"handlers/file_handler.go:261","msg":"返回响应","request_id":"7197e47b-464e-49f2-94b1-6df21411fc81","format":"text","prompt_only":false,"generate_prompt":true,"has_prompt":true}
{"level":"DEBUG","ts":"2025-04-22T22:47:11.382+0800","caller":"handlers/file_handler.go:270","msg":"已创建会话","request_id":"7197e47b-464e-49f2-94b1-6df21411fc81","session_id":"fd20e294-2177-41e4-a902-1beb7e84fc1c"}
{"level":"INFO","ts":"2025-04-22T22:47:11.387+0800","caller":"repo-prompt-web/main.go:62","msg":"完成HTTP请求","request_id":"7197e47b-464e-49f2-94b1-6df21411fc81","status":200,"latency":37.5079978,"bytes":20719,"errors":""}
{"level":"INFO","ts":"2025-04-22T22:47:27.588+0800","caller":"repo-prompt-web/main.go:39","msg":"收到HTTP请求","request_id":"a729f1a1-8928-4a5f-af23-d7c8862e3533","client_ip":"::1","method":"GET","path":"/api/ask-code-question","query":"session_id=fd20e294-2177-41e4-a902-1beb7e84fc1c&question=%E4%B8%BB%E8%A6%81%E5%AE%9E%E7%8E%B0%E4%BA%86%E4%BB%80%E4%B9%88%E5%8A%9F%E8%83%BD","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-22T22:47:27.588+0800","caller":"handlers/file_handler.go:504","msg":"处理代码问题请求","request_id":"a729f1a1-8928-4a5f-af23-d7c8862e3533","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-22T22:47:27.588+0800","caller":"handlers/file_handler.go:539","msg":"问题参数","request_id":"a729f1a1-8928-4a5f-af23-d7c8862e3533","question":"主要实现了什么功能","session_id":"fd20e294-2177-41e4-a902-1beb7e84fc1c","stream":false}
{"level":"DEBUG","ts":"2025-04-22T22:47:27.588+0800","caller":"gemini/client.go:120","msg":"准备发送提示词到 Gemini API","model":"gemini-2.5-pro-exp-03-25","prompt_length":18127}
{"level":"WARN","ts":"2025-04-22T22:47:57.589+0800","caller":"gemini/client.go:173","msg":"Gemini API 请求失败, 将重试","error":"Post \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-pro-exp-03-25:generateContent?key=AIzaSyDYXHl8BGUqsXuyu4kT7XUlJo3C14MMGjc\": dial tcp 142.250.77.10:443: i/o timeout","attempt":1,"max_retries":3}
{"level":"INFO","ts":"2025-04-22T22:47:57.589+0800","caller":"gemini/client.go:149","msg":"重试 Gemini API 请求","attempt":2,"max_retries":3}
{"level":"WARN","ts":"2025-04-22T22:48:29.591+0800","caller":"gemini/client.go:173","msg":"Gemini API 请求失败, 将重试","error":"Post \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-pro-exp-03-25:generateContent?key=AIzaSyDYXHl8BGUqsXuyu4kT7XUlJo3C14MMGjc\": dial tcp 142.250.198.74:443: i/o timeout","attempt":2,"max_retries":3}
{"level":"INFO","ts":"2025-04-22T22:48:29.591+0800","caller":"gemini/client.go:149","msg":"重试 Gemini API 请求","attempt":3,"max_retries":3}
{"level":"WARN","ts":"2025-04-22T22:49:03.593+0800","caller":"gemini/client.go:173","msg":"Gemini API 请求失败, 将重试","error":"Post \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-pro-exp-03-25:generateContent?key=AIzaSyDYXHl8BGUqsXuyu4kT7XUlJo3C14MMGjc\": dial tcp 142.250.196.202:443: i/o timeout","attempt":3,"max_retries":3}
{"level":"ERROR","ts":"2025-04-22T22:49:03.593+0800","caller":"service/ai_service.go:114","msg":"调用Gemini API回答代码问题失败","error":"Gemini API 请求失败，已达到最大重试次数","stacktrace":"repo-prompt-web/internal/app/service.(*AIService).AskQuestionAboutCode\n\tD:/goWorks/src/repo-prompt-web/internal/app/service/ai_service.go:114\nrepo-prompt-web/internal/interfaces/http/handlers.(*FileHandler).HandleAskCodeQuestion\n\tD:/goWorks/src/repo-prompt-web/internal/interfaces/http/handlers/file_handler.go:594\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.LoggerMiddleware.func3\n\tD:/goWorks/src/repo-prompt-web/main.go:48\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.RequestIDMiddleware.func2\n\tD:/goWorks/src/repo-prompt-web/main.go:26\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.CORSMiddleware.func1\n\tD:/goWorks/src/repo-prompt-web/main.go:84\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576\nnet/http.serverHandler.ServeHTTP\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:2102"}
{"level":"ERROR","ts":"2025-04-22T22:49:03.593+0800","caller":"handlers/file_handler.go:600","msg":"处理代码问题失败","request_id":"a729f1a1-8928-4a5f-af23-d7c8862e3533","error":"Gemini API 请求失败，已达到最大重试次数","stacktrace":"repo-prompt-web/internal/interfaces/http/handlers.(*FileHandler).HandleAskCodeQuestion\n\tD:/goWorks/src/repo-prompt-web/internal/interfaces/http/handlers/file_handler.go:600\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.LoggerMiddleware.func3\n\tD:/goWorks/src/repo-prompt-web/main.go:48\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.RequestIDMiddleware.func2\n\tD:/goWorks/src/repo-prompt-web/main.go:26\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.CORSMiddleware.func1\n\tD:/goWorks/src/repo-prompt-web/main.go:84\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576\nnet/http.serverHandler.ServeHTTP\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:2102"}
{"level":"ERROR","ts":"2025-04-22T22:49:03.594+0800","caller":"repo-prompt-web/main.go:62","msg":"完成HTTP请求","request_id":"a729f1a1-8928-4a5f-af23-d7c8862e3533","status":500,"latency":96.0062559,"bytes":65,"errors":"","stacktrace":"main.main.LoggerMiddleware.func3\n\tD:/goWorks/src/repo-prompt-web/main.go:62\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.RequestIDMiddleware.func2\n\tD:/goWorks/src/repo-prompt-web/main.go:26\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\nmain.main.CORSMiddleware.func1\n\tD:/goWorks/src/repo-prompt-web/main.go:84\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/logger.go:240\ngithub.com/gin-gonic/gin.(*Context).Next\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/context.go:174\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:620\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tD:/goWorks/pkg/mod/github.com/gin-gonic/gin@v1.9.1/gin.go:576\nnet/http.serverHandler.ServeHTTP\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\tD:/goWorks/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.1.windows-amd64/src/net/http/server.go:2102"}
{"level":"INFO","ts":"2025-04-22T22:50:23.635+0800","caller":"repo-prompt-web/main.go:39","msg":"收到HTTP请求","request_id":"b0520d58-96f9-43ab-816d-a5f5946abbfd","client_ip":"::1","method":"GET","path":"/api/ask-code-question","query":"session_id=fd20e294-2177-41e4-a902-1beb7e84fc1c&question=%E4%B8%BB%E8%A6%81%E5%AE%9E%E7%8E%B0%E4%BA%86%E4%BB%80%E4%B9%88%E5%8A%9F%E8%83%BD","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-22T22:50:23.635+0800","caller":"handlers/file_handler.go:504","msg":"处理代码问题请求","request_id":"b0520d58-96f9-43ab-816d-a5f5946abbfd","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-22T22:50:23.635+0800","caller":"handlers/file_handler.go:539","msg":"问题参数","request_id":"b0520d58-96f9-43ab-816d-a5f5946abbfd","question":"主要实现了什么功能","session_id":"fd20e294-2177-41e4-a902-1beb7e84fc1c","stream":false}
{"level":"DEBUG","ts":"2025-04-22T22:50:23.635+0800","caller":"gemini/client.go:120","msg":"准备发送提示词到 Gemini API","model":"gemini-2.5-pro-exp-03-25","prompt_length":18127}
{"level":"WARN","ts":"2025-04-22T22:50:53.636+0800","caller":"gemini/client.go:173","msg":"Gemini API 请求失败, 将重试","error":"Post \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-pro-exp-03-25:generateContent?key=AIzaSyDYXHl8BGUqsXuyu4kT7XUlJo3C14MMGjc\": dial tcp 142.250.196.202:443: i/o timeout","attempt":1,"max_retries":3}
{"level":"INFO","ts":"2025-04-22T22:50:53.636+0800","caller":"gemini/client.go:149","msg":"重试 Gemini API 请求","attempt":2,"max_retries":3}
{"level":"INFO","ts":"2025-04-22T22:59:18.021+0800","caller":"repo-prompt-web/main.go:100","msg":"服务启动","config_path":"config.yml"}
{"level":"INFO","ts":"2025-04-22T22:59:18.031+0800","caller":"gemini/client.go:78","msg":"使用配置的Gemini API代理","proxy_url":"http://127.0.0.1:7890"}
{"level":"INFO","ts":"2025-04-22T22:59:18.031+0800","caller":"repo-prompt-web/main.go:149","msg":"已配置 DeepSeek API 密钥，提示词生成功能可用"}
{"level":"INFO","ts":"2025-04-22T22:59:18.031+0800","caller":"repo-prompt-web/main.go:157","msg":"已配置 Gemini API 密钥，代码问答功能可用"}
{"level":"INFO","ts":"2025-04-22T22:59:18.031+0800","caller":"repo-prompt-web/main.go:161","msg":"启动服务","listen_addr":":8080"}
{"level":"INFO","ts":"2025-04-22T22:59:18.031+0800","caller":"repo-prompt-web/main.go:162","msg":"API使用方法","combine_code":"POST http://localhost:8080/api/combine-code","github_code":"GET http://localhost:8080/api/github-code?url=<repo_url>","generate_prompt":"POST http://localhost:8080/api/generate-prompt","preprocess_zip":"POST http://localhost:8080/api/preprocess-zip","ask_code_question":"GET/POST http://localhost:8080/api/ask-code-question?session_id=<id>&question=<question>&stream=true|false"}
{"level":"INFO","ts":"2025-04-22T22:59:26.088+0800","caller":"repo-prompt-web/main.go:39","msg":"收到HTTP请求","request_id":"9c3c0345-9cb6-4045-b79d-a26094c5339b","client_ip":"::1","method":"POST","path":"/api/combine-code","query":"","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-22T22:59:26.088+0800","caller":"handlers/file_handler.go:133","msg":"处理合并代码请求","request_id":"9c3c0345-9cb6-4045-b79d-a26094c5339b","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-22T22:59:26.088+0800","caller":"handlers/file_handler.go:156","msg":"接收到文件上传","request_id":"9c3c0345-9cb6-4045-b79d-a26094c5339b","file_name":"repo-prompt-web.zip","file_size":29826}
{"level":"DEBUG","ts":"2025-04-22T22:59:26.088+0800","caller":"handlers/file_handler.go:188","msg":"请求参数","request_id":"9c3c0345-9cb6-4045-b79d-a26094c5339b","format":"text","use_base64":false,"generate_prompt":true,"prompt_only":false,"include_content":true}
{"level":"INFO","ts":"2025-04-22T22:59:26.088+0800","caller":"handlers/file_handler.go:207","msg":"ZIP文件处理成功","request_id":"9c3c0345-9cb6-4045-b79d-a26094c5339b","file_name":"repo-prompt-web.zip","files_count":10}
{"level":"INFO","ts":"2025-04-22T22:59:26.088+0800","caller":"handlers/file_handler.go:215","msg":"开始生成项目架构分析","request_id":"9c3c0345-9cb6-4045-b79d-a26094c5339b"}
{"level":"INFO","ts":"2025-04-22T22:59:59.214+0800","caller":"handlers/file_handler.go:255","msg":"项目架构分析生成成功","request_id":"9c3c0345-9cb6-4045-b79d-a26094c5339b"}
{"level":"INFO","ts":"2025-04-22T22:59:59.214+0800","caller":"handlers/file_handler.go:261","msg":"返回响应","request_id":"9c3c0345-9cb6-4045-b79d-a26094c5339b","format":"text","prompt_only":false,"generate_prompt":true,"has_prompt":true}
{"level":"DEBUG","ts":"2025-04-22T22:59:59.214+0800","caller":"handlers/file_handler.go:270","msg":"已创建会话","request_id":"9c3c0345-9cb6-4045-b79d-a26094c5339b","session_id":"17cf7040-5ae3-4ccc-8d20-6259d71c6b0f"}
{"level":"INFO","ts":"2025-04-22T22:59:59.219+0800","caller":"repo-prompt-web/main.go:62","msg":"完成HTTP请求","request_id":"9c3c0345-9cb6-4045-b79d-a26094c5339b","status":200,"latency":33.130774,"bytes":20898,"errors":""}
{"level":"INFO","ts":"2025-04-22T23:00:12.289+0800","caller":"repo-prompt-web/main.go:39","msg":"收到HTTP请求","request_id":"9848e82b-2272-48da-a7e0-fa9e31be42ef","client_ip":"::1","method":"GET","path":"/api/ask-code-question","query":"session_id=17cf7040-5ae3-4ccc-8d20-6259d71c6b0f&question=%E4%B8%BB%E8%A6%81%E5%AE%9E%E7%8E%B0%E4%BA%86%E4%BB%80%E4%B9%88%E5%8A%9F%E8%83%BD","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-22T23:00:12.289+0800","caller":"handlers/file_handler.go:504","msg":"处理代码问题请求","request_id":"9848e82b-2272-48da-a7e0-fa9e31be42ef","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-22T23:00:12.289+0800","caller":"handlers/file_handler.go:539","msg":"问题参数","request_id":"9848e82b-2272-48da-a7e0-fa9e31be42ef","question":"主要实现了什么功能","session_id":"17cf7040-5ae3-4ccc-8d20-6259d71c6b0f","stream":false}
{"level":"DEBUG","ts":"2025-04-22T23:00:12.289+0800","caller":"gemini/client.go:120","msg":"准备发送提示词到 Gemini API","model":"gemini-2.5-pro-exp-03-25","prompt_length":18306}
{"level":"DEBUG","ts":"2025-04-22T23:00:48.958+0800","caller":"gemini/client.go:230","msg":"从 Gemini 收到响应","response_length":3462,"finish_reason":"STOP"}
{"level":"INFO","ts":"2025-04-22T23:00:48.958+0800","caller":"handlers/file_handler.go:607","msg":"代码问题处理成功","request_id":"9848e82b-2272-48da-a7e0-fa9e31be42ef","question":"主要实现了什么功能","response_length":3462}
{"level":"INFO","ts":"2025-04-22T23:00:48.958+0800","caller":"repo-prompt-web/main.go:62","msg":"完成HTTP请求","request_id":"9848e82b-2272-48da-a7e0-fa9e31be42ef","status":200,"latency":36.668694,"bytes":3606,"errors":""}
{"level":"INFO","ts":"2025-04-22T23:01:35.083+0800","caller":"repo-prompt-web/main.go:39","msg":"收到HTTP请求","request_id":"03cfcf44-cfec-422f-9078-5083f676f21f","client_ip":"::1","method":"GET","path":"/api/ask-code-question","query":"session_id=17cf7040-5ae3-4ccc-8d20-6259d71c6b0f&question=%E5%91%8A%E8%AF%89%E6%88%91%E5%A6%82%E4%BD%95%E8%83%BD%E5%A4%9F%E4%BC%98%E5%8C%96%E6%80%A7%E8%83%BD","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-22T23:01:35.084+0800","caller":"handlers/file_handler.go:504","msg":"处理代码问题请求","request_id":"03cfcf44-cfec-422f-9078-5083f676f21f","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-22T23:01:35.084+0800","caller":"handlers/file_handler.go:539","msg":"问题参数","request_id":"03cfcf44-cfec-422f-9078-5083f676f21f","question":"告诉我如何能够优化性能","session_id":"17cf7040-5ae3-4ccc-8d20-6259d71c6b0f","stream":false}
{"level":"DEBUG","ts":"2025-04-22T23:01:35.084+0800","caller":"gemini/client.go:120","msg":"准备发送提示词到 Gemini API","model":"gemini-2.5-pro-exp-03-25","prompt_length":18312}
{"level":"DEBUG","ts":"2025-04-22T23:02:34.337+0800","caller":"gemini/client.go:230","msg":"从 Gemini 收到响应","response_length":9896,"finish_reason":"STOP"}
{"level":"INFO","ts":"2025-04-22T23:02:34.337+0800","caller":"handlers/file_handler.go:607","msg":"代码问题处理成功","request_id":"03cfcf44-cfec-422f-9078-5083f676f21f","question":"告诉我如何能够优化性能","response_length":9896}
{"level":"INFO","ts":"2025-04-22T23:02:34.338+0800","caller":"repo-prompt-web/main.go:62","msg":"完成HTTP请求","request_id":"03cfcf44-cfec-422f-9078-5083f676f21f","status":200,"latency":59.2544364,"bytes":10144,"errors":""}
{"level":"INFO","ts":"2025-04-22T23:06:01.309+0800","caller":"repo-prompt-web/main.go:100","msg":"服务启动","config_path":"config.yml"}
{"level":"INFO","ts":"2025-04-22T23:06:01.320+0800","caller":"gemini/client.go:78","msg":"使用配置的Gemini API代理","proxy_url":"http://127.0.0.1:7890"}
{"level":"INFO","ts":"2025-04-22T23:06:01.320+0800","caller":"repo-prompt-web/main.go:149","msg":"已配置 DeepSeek API 密钥，提示词生成功能可用"}
{"level":"INFO","ts":"2025-04-22T23:06:01.320+0800","caller":"repo-prompt-web/main.go:157","msg":"已配置 Gemini API 密钥，代码问答功能可用"}
{"level":"INFO","ts":"2025-04-22T23:06:01.320+0800","caller":"repo-prompt-web/main.go:161","msg":"启动服务","listen_addr":":8080"}
{"level":"INFO","ts":"2025-04-22T23:06:01.320+0800","caller":"repo-prompt-web/main.go:162","msg":"API使用方法","combine_code":"POST http://localhost:8080/api/combine-code","github_code":"GET http://localhost:8080/api/github-code?url=<repo_url>","generate_prompt":"POST http://localhost:8080/api/generate-prompt","preprocess_zip":"POST http://localhost:8080/api/preprocess-zip","ask_code_question":"GET/POST http://localhost:8080/api/ask-code-question?session_id=<id>&question=<question>&stream=true|false"}
{"level":"INFO","ts":"2025-04-22T23:06:40.770+0800","caller":"repo-prompt-web/main.go:39","msg":"收到HTTP请求","request_id":"cbb3b0cb-2138-4b09-be50-f7b26b30a235","client_ip":"::1","method":"POST","path":"/api/combine-code","query":"","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-22T23:06:40.770+0800","caller":"handlers/file_handler.go:133","msg":"处理合并代码请求","request_id":"cbb3b0cb-2138-4b09-be50-f7b26b30a235","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-22T23:06:40.788+0800","caller":"handlers/file_handler.go:156","msg":"接收到文件上传","request_id":"cbb3b0cb-2138-4b09-be50-f7b26b30a235","file_name":"nft-service.zip","file_size":286775}
{"level":"DEBUG","ts":"2025-04-22T23:06:40.788+0800","caller":"handlers/file_handler.go:188","msg":"请求参数","request_id":"cbb3b0cb-2138-4b09-be50-f7b26b30a235","format":"text","use_base64":false,"generate_prompt":true,"prompt_only":false,"include_content":true}
{"level":"INFO","ts":"2025-04-22T23:06:40.808+0800","caller":"handlers/file_handler.go:207","msg":"ZIP文件处理成功","request_id":"cbb3b0cb-2138-4b09-be50-f7b26b30a235","file_name":"nft-service.zip","files_count":146}
{"level":"INFO","ts":"2025-04-22T23:06:40.809+0800","caller":"handlers/file_handler.go:215","msg":"开始生成项目架构分析","request_id":"cbb3b0cb-2138-4b09-be50-f7b26b30a235"}
{"level":"INFO","ts":"2025-04-22T23:07:27.822+0800","caller":"handlers/file_handler.go:255","msg":"项目架构分析生成成功","request_id":"cbb3b0cb-2138-4b09-be50-f7b26b30a235"}
{"level":"INFO","ts":"2025-04-22T23:07:27.822+0800","caller":"handlers/file_handler.go:261","msg":"返回响应","request_id":"cbb3b0cb-2138-4b09-be50-f7b26b30a235","format":"text","prompt_only":false,"generate_prompt":true,"has_prompt":true}
{"level":"DEBUG","ts":"2025-04-22T23:07:27.822+0800","caller":"handlers/file_handler.go:270","msg":"已创建会话","request_id":"cbb3b0cb-2138-4b09-be50-f7b26b30a235","session_id":"b00fe29a-1f9d-4468-996f-42756fc0c419"}
{"level":"INFO","ts":"2025-04-22T23:07:27.867+0800","caller":"repo-prompt-web/main.go:62","msg":"完成HTTP请求","request_id":"cbb3b0cb-2138-4b09-be50-f7b26b30a235","status":200,"latency":47.097188,"bytes":1234582,"errors":""}
{"level":"INFO","ts":"2025-04-22T23:07:55.631+0800","caller":"repo-prompt-web/main.go:39","msg":"收到HTTP请求","request_id":"1d1ba4f4-67cd-447f-b8e8-08d936da8874","client_ip":"::1","method":"GET","path":"/api/ask-code-question","query":"session_id=b00fe29a-1f9d-4468-996f-42756fc0c419&question=%E5%91%8A%E8%AF%89%E6%88%91%E4%B8%8B%E5%8D%95%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-22T23:07:55.631+0800","caller":"handlers/file_handler.go:504","msg":"处理代码问题请求","request_id":"1d1ba4f4-67cd-447f-b8e8-08d936da8874","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-22T23:07:55.631+0800","caller":"handlers/file_handler.go:539","msg":"问题参数","request_id":"1d1ba4f4-67cd-447f-b8e8-08d936da8874","question":"告诉我下单怎么实现的","session_id":"b00fe29a-1f9d-4468-996f-42756fc0c419","stream":false}
{"level":"DEBUG","ts":"2025-04-22T23:07:55.631+0800","caller":"service/ai_service.go:166","msg":"创建新的AI会话上下文","session_id":"b00fe29a-1f9d-4468-996f-42756fc0c419"}
{"level":"DEBUG","ts":"2025-04-22T23:07:55.631+0800","caller":"service/ai_service.go:183","msg":"首次提问，使用完整代码上下文","session_id":"b00fe29a-1f9d-4468-996f-42756fc0c419","prompt_length":30140}
{"level":"DEBUG","ts":"2025-04-22T23:07:55.631+0800","caller":"gemini/client.go:120","msg":"准备发送提示词到 Gemini API","model":"gemini-2.5-pro-exp-03-25","prompt_length":30140}
{"level":"DEBUG","ts":"2025-04-22T23:08:39.976+0800","caller":"gemini/client.go:230","msg":"从 Gemini 收到响应","response_length":4893,"finish_reason":"STOP"}
{"level":"INFO","ts":"2025-04-22T23:08:39.976+0800","caller":"handlers/file_handler.go:609","msg":"代码问题处理成功","request_id":"1d1ba4f4-67cd-447f-b8e8-08d936da8874","question":"告诉我下单怎么实现的","response_length":4893}
{"level":"INFO","ts":"2025-04-22T23:08:39.976+0800","caller":"repo-prompt-web/main.go:62","msg":"完成HTTP请求","request_id":"1d1ba4f4-67cd-447f-b8e8-08d936da8874","status":200,"latency":44.3448,"bytes":5032,"errors":""}
{"level":"INFO","ts":"2025-04-22T23:09:24.781+0800","caller":"repo-prompt-web/main.go:39","msg":"收到HTTP请求","request_id":"92c2009b-b83f-4093-92cc-74f27402d074","client_ip":"::1","method":"GET","path":"/api/ask-code-question","query":"session_id=b00fe29a-1f9d-4468-996f-42756fc0c419&question=%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96%E4%B8%8B%E5%8D%95%E5%91%A2","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-22T23:09:24.781+0800","caller":"handlers/file_handler.go:504","msg":"处理代码问题请求","request_id":"92c2009b-b83f-4093-92cc-74f27402d074","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-22T23:09:24.781+0800","caller":"handlers/file_handler.go:539","msg":"问题参数","request_id":"92c2009b-b83f-4093-92cc-74f27402d074","question":"如何优化下单呢","session_id":"b00fe29a-1f9d-4468-996f-42756fc0c419","stream":false}
{"level":"DEBUG","ts":"2025-04-22T23:09:24.781+0800","caller":"service/ai_service.go:204","msg":"后续提问，使用对话历史","session_id":"b00fe29a-1f9d-4468-996f-42756fc0c419","message_count":3,"prompt_length":35089}
{"level":"DEBUG","ts":"2025-04-22T23:09:24.781+0800","caller":"gemini/client.go:120","msg":"准备发送提示词到 Gemini API","model":"gemini-2.5-pro-exp-03-25","prompt_length":35089}
{"level":"DEBUG","ts":"2025-04-22T23:10:15.545+0800","caller":"gemini/client.go:230","msg":"从 Gemini 收到响应","response_length":6141,"finish_reason":"STOP"}
{"level":"INFO","ts":"2025-04-22T23:10:15.545+0800","caller":"handlers/file_handler.go:609","msg":"代码问题处理成功","request_id":"92c2009b-b83f-4093-92cc-74f27402d074","question":"如何优化下单呢","response_length":6141}
{"level":"INFO","ts":"2025-04-22T23:10:15.545+0800","caller":"repo-prompt-web/main.go:62","msg":"完成HTTP请求","request_id":"92c2009b-b83f-4093-92cc-74f27402d074","status":200,"latency":50.7644287,"bytes":6272,"errors":""}
{"level":"INFO","ts":"2025-04-22T23:12:39.417+0800","caller":"repo-prompt-web/main.go:100","msg":"服务启动","config_path":"config.yml"}
{"level":"INFO","ts":"2025-04-22T23:12:39.429+0800","caller":"gemini/client.go:78","msg":"使用配置的Gemini API代理","proxy_url":"http://127.0.0.1:7890"}
{"level":"INFO","ts":"2025-04-22T23:12:39.429+0800","caller":"repo-prompt-web/main.go:149","msg":"已配置 DeepSeek API 密钥，提示词生成功能可用"}
{"level":"INFO","ts":"2025-04-22T23:12:39.429+0800","caller":"repo-prompt-web/main.go:157","msg":"已配置 Gemini API 密钥，代码问答功能可用"}
{"level":"INFO","ts":"2025-04-22T23:12:39.429+0800","caller":"repo-prompt-web/main.go:161","msg":"启动服务","listen_addr":":8080"}
{"level":"INFO","ts":"2025-04-22T23:12:39.431+0800","caller":"repo-prompt-web/main.go:162","msg":"API使用方法","combine_code":"POST http://localhost:8080/api/combine-code","github_code":"GET http://localhost:8080/api/github-code?url=<repo_url>","generate_prompt":"POST http://localhost:8080/api/generate-prompt","preprocess_zip":"POST http://localhost:8080/api/preprocess-zip","ask_code_question":"GET/POST http://localhost:8080/api/ask-code-question?session_id=<id>&question=<question>&stream=true|false"}
{"level":"INFO","ts":"2025-04-22T23:13:37.742+0800","caller":"repo-prompt-web/main.go:39","msg":"收到HTTP请求","request_id":"3330df52-aed8-4550-bb01-6176a910c26e","client_ip":"::1","method":"POST","path":"/api/combine-code","query":"","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-22T23:13:37.742+0800","caller":"handlers/file_handler.go:133","msg":"处理合并代码请求","request_id":"3330df52-aed8-4550-bb01-6176a910c26e","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-22T23:13:37.744+0800","caller":"handlers/file_handler.go:156","msg":"接收到文件上传","request_id":"3330df52-aed8-4550-bb01-6176a910c26e","file_name":"nft-service.zip","file_size":286775}
{"level":"DEBUG","ts":"2025-04-22T23:13:37.744+0800","caller":"handlers/file_handler.go:188","msg":"请求参数","request_id":"3330df52-aed8-4550-bb01-6176a910c26e","format":"text","use_base64":false,"generate_prompt":true,"prompt_only":false,"include_content":true}
{"level":"INFO","ts":"2025-04-22T23:13:37.756+0800","caller":"handlers/file_handler.go:207","msg":"ZIP文件处理成功","request_id":"3330df52-aed8-4550-bb01-6176a910c26e","file_name":"nft-service.zip","files_count":146}
{"level":"INFO","ts":"2025-04-22T23:13:37.756+0800","caller":"handlers/file_handler.go:215","msg":"开始生成项目架构分析","request_id":"3330df52-aed8-4550-bb01-6176a910c26e"}
{"level":"INFO","ts":"2025-04-22T23:14:12.140+0800","caller":"handlers/file_handler.go:255","msg":"项目架构分析生成成功","request_id":"3330df52-aed8-4550-bb01-6176a910c26e"}
{"level":"INFO","ts":"2025-04-22T23:14:12.140+0800","caller":"handlers/file_handler.go:261","msg":"返回响应","request_id":"3330df52-aed8-4550-bb01-6176a910c26e","format":"text","prompt_only":false,"generate_prompt":true,"has_prompt":true}
{"level":"DEBUG","ts":"2025-04-22T23:14:12.140+0800","caller":"handlers/file_handler.go:270","msg":"已创建会话","request_id":"3330df52-aed8-4550-bb01-6176a910c26e","session_id":"5a621328-f540-450d-8558-fa895d24df3a"}
{"level":"INFO","ts":"2025-04-22T23:14:12.217+0800","caller":"repo-prompt-web/main.go:62","msg":"完成HTTP请求","request_id":"3330df52-aed8-4550-bb01-6176a910c26e","status":200,"latency":34.47459,"bytes":1234533,"errors":""}
{"level":"INFO","ts":"2025-04-22T23:16:48.653+0800","caller":"repo-prompt-web/main.go:39","msg":"收到HTTP请求","request_id":"6761806a-2396-4034-97f7-23933475255d","client_ip":"::1","method":"GET","path":"/api/ask-code-question","query":"session_id=5a621328-f540-450d-8558-fa895d24df3a&question=%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96%E4%B8%8B%E5%8D%95%E5%91%A2","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-22T23:16:48.653+0800","caller":"handlers/file_handler.go:504","msg":"处理代码问题请求","request_id":"6761806a-2396-4034-97f7-23933475255d","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-22T23:16:48.653+0800","caller":"handlers/file_handler.go:539","msg":"问题参数","request_id":"6761806a-2396-4034-97f7-23933475255d","question":"如何优化下单呢","session_id":"5a621328-f540-450d-8558-fa895d24df3a","stream":false}
{"level":"DEBUG","ts":"2025-04-22T23:16:48.653+0800","caller":"service/ai_service.go:166","msg":"创建新的AI会话上下文","session_id":"5a621328-f540-450d-8558-fa895d24df3a"}
{"level":"DEBUG","ts":"2025-04-22T23:16:48.653+0800","caller":"service/ai_service.go:183","msg":"首次提问，使用完整代码上下文","session_id":"5a621328-f540-450d-8558-fa895d24df3a","prompt_length":31846}
{"level":"DEBUG","ts":"2025-04-22T23:16:48.657+0800","caller":"gemini/client.go:120","msg":"准备发送提示词到 Gemini API","model":"gemini-2.5-pro-exp-03-25","prompt_length":31846}
{"level":"DEBUG","ts":"2025-04-22T23:17:42.434+0800","caller":"gemini/client.go:230","msg":"从 Gemini 收到响应","response_length":7895,"finish_reason":"STOP"}
{"level":"INFO","ts":"2025-04-22T23:17:42.435+0800","caller":"handlers/file_handler.go:609","msg":"代码问题处理成功","request_id":"6761806a-2396-4034-97f7-23933475255d","question":"如何优化下单呢","response_length":7895}
{"level":"INFO","ts":"2025-04-22T23:17:42.435+0800","caller":"repo-prompt-web/main.go:62","msg":"完成HTTP请求","request_id":"6761806a-2396-4034-97f7-23933475255d","status":200,"latency":53.783187,"bytes":8077,"errors":""}
{"level":"INFO","ts":"2025-04-22T23:18:28.856+0800","caller":"repo-prompt-web/main.go:39","msg":"收到HTTP请求","request_id":"06cff2d5-6c2c-4f38-8b62-8857ad35504a","client_ip":"::1","method":"GET","path":"/api/ask-code-question","query":"session_id=5a621328-f540-450d-8558-fa895d24df3a&question=%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96%E4%B8%8B%E5%8D%95%E5%91%A2111","user_agent":"Apifox/1.0.0 (https://apifox.com)"}
{"level":"INFO","ts":"2025-04-22T23:18:28.856+0800","caller":"handlers/file_handler.go:504","msg":"处理代码问题请求","request_id":"06cff2d5-6c2c-4f38-8b62-8857ad35504a","client_ip":"::1"}
{"level":"DEBUG","ts":"2025-04-22T23:18:28.857+0800","caller":"handlers/file_handler.go:539","msg":"问题参数","request_id":"06cff2d5-6c2c-4f38-8b62-8857ad35504a","question":"如何优化下单呢111","session_id":"5a621328-f540-450d-8558-fa895d24df3a","stream":false}
{"level":"DEBUG","ts":"2025-04-22T23:18:28.857+0800","caller":"service/ai_service.go:204","msg":"后续提问，使用对话历史","session_id":"5a621328-f540-450d-8558-fa895d24df3a","message_count":3,"prompt_length":39800}
{"level":"DEBUG","ts":"2025-04-22T23:18:28.862+0800","caller":"gemini/client.go:120","msg":"准备发送提示词到 Gemini API","model":"gemini-2.5-pro-exp-03-25","prompt_length":39800}
{"level":"DEBUG","ts":"2025-04-22T23:18:56.564+0800","caller":"gemini/client.go:230","msg":"从 Gemini 收到响应","response_length":4114,"finish_reason":"STOP"}
{"level":"INFO","ts":"2025-04-22T23:18:56.564+0800","caller":"handlers/file_handler.go:609","msg":"代码问题处理成功","request_id":"06cff2d5-6c2c-4f38-8b62-8857ad35504a","question":"如何优化下单呢111","response_length":4114}
{"level":"INFO","ts":"2025-04-22T23:18:56.565+0800","caller":"repo-prompt-web/main.go:62","msg":"完成HTTP请求","request_id":"06cff2d5-6c2c-4f38-8b62-8857ad35504a","status":200,"latency":27.7094588,"bytes":4220,"errors":""}
